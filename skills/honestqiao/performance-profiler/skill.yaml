# Skill: performance_profiler

analyze_performance(code: string) => object

## Trigger Patterns
- 性能分析
- 性能瓶颈
- performance
- 优化建议

## Implementation

分析代码性能，识别瓶颈并提供优化建议。

```javascript
function analyzePerformance(code) {
  const issues = [];
  
  // 检测循环内操作
  if (/for\s*\(.*\[\]\.push|while.*\.push/.test(code)) {
    issues.push({ type: 'loop_push', suggestion: '使用数组推导式或预先分配' });
  }
  
  // 检测重复计算
  if (/\.length\s*\(.*\)\.length/.test(code)) {
    issues.push({ type: 'redundant_calc', suggestion: '缓存长度值' });
  }
  
  // 检测同步阻塞
  if (/fs\.readFileSync|await.*sleep/.test(code)) {
    issues.push({ type: 'sync_block', suggestion: '考虑异步或流处理' });
  }
  
  return { issues, complexity: calculateComplexity(code) };
}
```
