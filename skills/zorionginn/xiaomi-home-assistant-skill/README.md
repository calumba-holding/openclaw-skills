# 小米 Home Assistant 集成技能

## 系统架构
本技能提供安全的智能家居集成，专注于实时设备监控和即时建议：

- **实时设备监控**: 查询小米设备当前状态
- **异常检测**: 识别设备异常状态并告警  
- **即时建议**: 基于当前状态提供操作建议
- **安全设计**: 所有数据处理在内存中完成，不持久化敏感信息

## 功能特性

### 设备监控
- 💡 多个灯具/开关状态监控
- 💧 加湿器状态监控  
- 🌡️ 多个传感器数据收集（温湿度等）
- ⚙️ 其他智能设备管理
- 🎵 小爱音箱语音控制

### 异常告警
- **宠物设备**: 滤芯寿命低、电池电量低告警
- **环境设备**: 湿度过高/过低告警
- **设备离线**: 设备连接状态异常告警

### 即时建议
- 基于当前设备状态提供操作建议
- 不依赖历史数据，确保隐私安全

## 配置文件
- `config.json`: Home Assistant 连接配置和自然语言映射（发布版本包含示例配置）
- `handlers/`: 设备控制处理器（包含小爱音箱控制）
- `homeassistant_auth.json`: Home Assistant 认证令牌模板

## 安装配置
1. 复制 `config.json` 和 `homeassistant_auth.json` 到你的工作目录
2. 替换占位符为你的实际 Home Assistant URL 和访问令牌
3. 根据你的设备实体ID更新自然语言命令映射
4. 确保 OpenClaw 有适当的文件读写权限

## 依赖要求
- Home Assistant API 访问令牌
- Python requests 库（由 OpenClaw 运行时提供）
- 网络连接（用于 API 调用）

## 使用场景

用户可以询问：
- "检查加湿器状态"
- "宠物饮水机需要维护吗？"  
- "卧室湿度正常吗？"
- "打开客厅灯"