/* Arch Engine Styles - Minimal + CSS Variables */

:root {
    /* Librarian mermaid colors */
    --default-bg: #e0e0e0;
    --default-border: #666;
    --approved-bg: #FFF9C4;
    --approved-border: #F9A825;
    --blocker-bg: #FFCDD2;
    --blocker-border: #D32F2F;
    --developed-bg: #D5F5D5;
    --developed-border: #388E3C;
    --notes-bg: #E3F2FD;
    --notes-border: #1976D2;
    --outside-bg: #D5F5D5;
    --outside-border: #388E3C;
    --partial-bg: #E1BEE7;
    --partial-border: #7B1FA2;
    --border-radius: 5px;
    
    /* Legacy */
    --in-progress-bg: #4A90E2;
    --pending-bg: #FFD700;
}

/* Base */
body {
    background: lime !important; /* DEBUG: se aparecer verde = CSS carrega */
    margin: 0;
    padding: 0;
    font-family: Helvetica, Arial, sans-serif;
}

main.container {
    padding: 15px !important;
    border: 3px solid red !important;
    background: yellow !important; /* DEBUG */
}

/* Mermaid container */
.mermaid {
    background: transparent;
}

/* Modal mermaid: stretch to fit */
.modal-body .mermaid svg {
    width: 100% !important;
    height: auto !important;
    max-width: 100% !important;
}

/* === MERMAID NODE CUSTOMIZATION === */

/* Base styling (applies to ALL nodes) */
.node rect, .node polygon, .node circle, .node path, .node ellipse {
  stroke-width: 2px !important;
}

/* Node text (universal) */
.mermaid .nodeLabel,
.mermaid .label,
.node text,
g.node text {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
  fill: black !important;
  color: black !important;
}

g.node > * {
  stroke-width: 2px !important;
}

g.node rect {
  rx: 5px !important;
  ry: 5px !important;
}

/* Default state (explicit) */
.default rect, .default polygon, .default circle, .default path, .default ellipse {
  fill: var(--default-bg) !important;
  stroke: var(--default-border) !important;
}

g.node.default path {
  fill: var(--default-bg) !important;
  stroke: var(--default-border) !important;
  stroke-width: 2px !important;
}

g.node.default polygon {
  stroke-width: 2px !important;
}
.approved rect, .approved polygon, .approved circle, .approved path, .approved ellipse {
  fill: var(--approved-bg) !important;
  stroke: var(--approved-border) !important;
}

g.node.approved path {
  fill: var(--approved-bg) !important;
  stroke: var(--approved-border) !important;
  stroke-width: 2px !important;
}

g.node.approved polygon {
  stroke-width: 2px !important;
}

/* Blocker state */
.blocker rect, .blocker polygon, .blocker circle, .blocker path, .blocker ellipse {
  fill: var(--blocker-bg) !important;
  stroke: var(--blocker-border) !important;
}

g.node.blocker path {
  fill: var(--blocker-bg) !important;
  stroke: var(--blocker-border) !important;
  stroke-width: 2px !important;
}

g.node.blocker polygon {
  stroke-width: 2px !important;
}

/* Developed state */
.developed rect, .developed polygon, .developed circle, .developed path, .developed ellipse {
  fill: var(--developed-bg) !important;
  stroke: var(--developed-border) !important;
}

g.node.developed path {
  fill: var(--developed-bg) !important;
  stroke: var(--developed-border) !important;
  stroke-width: 2px !important;
}

g.node.developed polygon {
  stroke-width: 2px !important;
}

/* Developed-notes state */
.notes rect, .notes polygon, .notes circle, .notes path, .notes ellipse {
  fill: var(--notes-bg) !important;
  stroke: var(--notes-border) !important;
}

g.node.notes path {
  fill: var(--notes-bg) !important;
  stroke: var(--notes-border) !important;
  stroke-width: 2px !important;
}

g.node.notes polygon {
  stroke-width: 2px !important;
}

/* Outside-system state (green with dashed borders) */
.outside rect, .outside polygon, .outside circle, .outside path, .outside ellipse {
  fill: var(--outside-bg) !important;
  stroke: var(--outside-border) !important;
  stroke-dasharray: 5 5 !important;
}

g.node.outside path {
  fill: var(--outside-bg) !important;
  stroke: var(--outside-border) !important;
  stroke-width: 2px !important;
  stroke-dasharray: 5 5 !important;
}

g.node.outside polygon {
  stroke-width: 2px !important;
  stroke-dasharray: 5 5 !important;
}

/* Partial state */
.partial rect, .partial polygon, .partial circle, .partial path, .partial ellipse {
  fill: var(--partial-bg) !important;
  stroke: var(--partial-border) !important;
}

g.node.partial path {
  fill: var(--partial-bg) !important;
  stroke: var(--partial-border) !important;
  stroke-width: 2px !important;
}

g.node.partial polygon {
  stroke-width: 2px !important;
}

/* Default (explicit class) */
g.node.default path {
  fill: var(--node-bg) !important;
  stroke: var(--node-border) !important;
  stroke-width: 2px !important;
}

g.node.default polygon {
  stroke-width: 2px !important;
}

/* Edge styling */
.edgePath path,
path.edgePath,
.flowchart-link {
  stroke: var(--default-border) !important;
  stroke-width: 2px !important;
  fill: none !important;
}

/* Edge labels - match arrow color */
.edgeLabel {
  opacity: 1 !important;
}

.edgeLabel rect,
.edgeLabel foreignObject {
  fill: var(--default-border) !important;
  stroke: none !important;
  rx: 5px !important;
  ry: 5px !important;
  opacity: 1 !important;
}

.edgeLabel .labelBkg,
.edgeLabel div {
  background-color: var(--default-border) !important;
  opacity: 1 !important;
  border-radius: 5px !important;
  padding: 5px 10px !important;
}

.labelBkg {
  opacity: 1 !important;
  background-color: var(--default-border) !important;
  border-radius: 5px !important;
  padding: 5px 10px !important;
}

div.labelBkg {
  opacity: 1 !important;
  background-color: var(--default-border) !important;
  border-radius: 5px !important;
  padding: 5px 10px !important;
}

foreignObject:has(.labelBkg) {
  opacity: 1 !important;
}

span.edgeLabel {
  background: var(--default-border) !important;
  border: none !important;
  border-radius: 5px !important;
  padding: 5px 10px !important;
  color: white !important;
  font-size: 80% !important;
  font-weight: normal !important;
  line-height: 100% !important;
  white-space: normal !important;
  word-wrap: break-word !important;
  max-width: 150px !important;
  display: inline-block !important;
}

.edgeLabel text {
  transform: rotate(0deg) !important;
  writing-mode: horizontal-tb !important;
  fill: white !important;
  font-size: 80% !important;
  line-height: 100% !important;
}

/* Force ALL children of node groups */
g.node > * {
  stroke-width: 2px !important;
}

/* Rounded corners for all node shapes */
g.node rect {
  rx: var(--border-radius) !important;
  ry: var(--border-radius) !important;
}

/* Legacy compatibility */
.mermaid .node.in-progress rect,
.mermaid .node.in-progress polygon {
    fill: var(--in-progress-bg) !important;
}

.mermaid .node.pending rect,
.mermaid .node.pending polygon {
    fill: var(--pending-bg) !important;
}
